"use strict";(self["webpackChunkgrandmasam_diner_renewed"]=self["webpackChunkgrandmasam_diner_renewed"]||[]).push([[293],{304:function(t,e,o){o.d(e,{A:function(){return x}});var s=o(641);const a={class:"modal fade",ref:"modalMessage",id:"cartMessage",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},n={class:"modal-dialog"},d={key:0,class:"modal-content"},l={class:"modal-header bg-warning"},i=(0,s.Lk)("h3",{class:"modal-title text-light font-Noto fw-550",id:"exampleModalLabel"},"執行成功",-1),r=(0,s.Fv)('<div class="modal-body"><div class="container pt-2 gx-2"><h5 class="fw-bold"><span class="text-success"><i class="bi bi-check-circle"></i></span> 商品加入購物車中 </h5></div></div>',1),c={class:"modal-footer"},u={class:"container gx-2 d-flex justify-content-center"},p={key:1,class:"modal-content"},b={class:"modal-header bg-danger"},g=(0,s.Lk)("h3",{class:"modal-title text-light font-Noto fw-550",id:"exampleModalLabel"},"刪除警示",-1),h=(0,s.Lk)("div",{class:"modal-body"},[(0,s.Lk)("div",{class:"container gx-2 pt-2"},[(0,s.Lk)("h5",{class:"font-Noto fw-550"},"即將被您刪除的商品會感到難過"),(0,s.Lk)("p",{class:"font-Noto fw-400"}," 其實我們的商品也是有情緒的，您這麼做會讓商品感受到您的冷漠，而他們要的，其實不多，只是希望您能接受他們而已 ")])],-1),m={class:"modal-footer gx-2"},L={class:"container d-flex justify-content-end"};function k(t,e,o,k,f,v){return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.Lk)("div",n,[f.add?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("div",l,[i,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...t)=>v.closeModal&&v.closeModal(...t)),"data-bs-dismiss":"modal","aria-label":"Close"})]),r,(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.Lk)("button",{type:"button",class:"btn btn-warning mx-2 mb-1 p-2 border border-dark border-1 font-Noto fw-400",onClick:e[1]||(e[1]=(...t)=>v.closeModal&&v.closeModal(...t))}," 好優 ")])])])):((0,s.uX)(),(0,s.CE)("div",p,[(0,s.Lk)("div",b,[g,(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:e[2]||(e[2]=(...t)=>v.closeModal&&v.closeModal(...t)),"aria-label":"Close"})]),h,(0,s.Lk)("div",m,[(0,s.Lk)("div",L,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-dark p-2 mb-1 font-Noto fw-400","data-bs-dismiss":"modal",onClick:e[3]||(e[3]=(...t)=>v.closeModal&&v.closeModal(...t))}," 再想想 "),(0,s.Lk)("button",{type:"button",class:"btn btn-danger ms-2 p-2 mb-1 border border-dark border-1 font-Noto fw-400",onClick:e[4]||(e[4]=e=>(v.removeCart(f.all,f.id),t.$emit("get-cart"),v.closeModal()))}," 這與我無瓜 ")])])]))])],512)}var f=o(9635),v=o.n(f),w={data(){return{modal:null,add:!0,id:"",all:!1}},methods:{openModal(t,e,o){t?this.add=!0:(this.add=!1,this.id=e,this.all=!!o),this.modal.show()},closeModal(){this.modal.hide(),this.id="",this.all=!1},removeCart(t,e){t?this.$http.delete("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/carts").then((()=>{})):this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart/${e}`).then((()=>{}))}},mounted(){this.modal=new(v())(document.querySelector("#cartMessage"))}},C=o(6262);const y=(0,C.A)(w,[["render",k]]);var x=y},2293:function(t,e,o){o.r(e),o.d(e,{default:function(){return Q}});var s=o(641),a=o(3751),n=o(33);const d={class:"container px-lg-5"},l=(0,s.Fv)('<div class="container my-3 d-none d-md-grid"><div class="row row-cols-3"><div class="col"><button class="btn w-100 btn-warning rounded-2 border border-dark border-3" type="button"><p class="fs-4 font-Noto fw-600 text-dark my-2">購物車</p></button></div><div class="col"><button class="btn w-100 btn-outline-secondary rounded-2 border border-body border-3" type="button" disabled><p class="fs-4 font-Noto fw-600 my-2">填寫資訊</p></button></div><div class="col"><button class="btn w-100 btn-outline-secondary rounded-2 border border-body border-3" type="button" disabled><p class="fs-4 font-Noto fw-600 my-2">訂單內容</p></button></div></div></div><div class="row mt-5 mb-3"><h2 class="font-Noto fw-700 text-center text-md-start ps-md-5 text-warning"> 步驟 1. 購物車內容 </h2></div>',2),i={class:"row mt-4 px-lg-5"},r={class:"text-end"},c=["disabled"],u={class:"spinner-grow spinner-grow-sm"},p={class:"shadow mb-5 bg-body border border-1 border-body p-5 align-middle rounded-3"},b={class:"table"},g=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",{class:"text-start font-Noto fw-bold fs-5 text-primary"},[(0,s.Lk)("th",null,[(0,s.eW)("刪"),(0,s.Lk)("span",{class:"d-none d-lg-inline"},"除鍵")]),(0,s.Lk)("th",{class:"d-none d-lg-table-cell"},"預覽圖"),(0,s.Lk)("th",null,"品名"),(0,s.Lk)("th",null,[(0,s.eW)("數量"),(0,s.Lk)("span",{class:"d-none d-lg-inline"},"/單位")]),(0,s.Lk)("th",{class:"d-none d-lg-table-cell text-center"},"單價/總價")])],-1),h={key:0},m=["onClick","disabled"],L={class:"spinner-grow spinner-grow-sm"},k={class:"d-none d-lg-table-cell"},f={class:"font-Noto fs-5 fw-400"},v={class:"input-group input-group-sm"},w={class:"input-group mb-sm-3"},C=["onUpdate:modelValue","onChange","disabled"],y={class:"spinner-grow spinner-grow-sm"},x=["value"],M={class:"input-group-text d-none d-lg-table-cell font-Noto fw-400",id:"basic-addon2"},I={class:"d-none text-center d-lg-table-cell"},N={class:"spinner-grow spinner-grow-sm"},$={class:"text-secondary fz-sm fs-5"},_={class:"font-Noto fw-400 fs-5"},A=(0,s.Lk)("td",{class:"d-none d-lg-table-cell"},null,-1),D=(0,s.Lk)("td",{colspan:"2",class:"text-end d-lg-none font-Noto fw-400"},"只需",-1),E=(0,s.Lk)("td",{colspan:"3",class:"text-end d-none d-lg-table-cell font-Noto fw-bold"},"只需",-1),X={class:"text-end fs-4 font-Noto fw-bold text-warning"},F=(0,s.Lk)("span",{class:"d-none d-lg-inline font-Noto fw-bold"}," 元",-1),q={class:"row d-flex justify-content-end"},S={class:"col-12 col-lg-4"},V={class:"input-group mb-3 input-group-sm"},G=(0,s.Lk)("label",{for:"CartView_coupon"},null,-1),H={class:"input-group-append"},W={class:"text-end my-3"},P=["disabled"];function U(t,e,o,U,j,K){const T=(0,s.g2)("PageLoading"),z=(0,s.g2)("CartMessage");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(T,{loader:"bars",active:j.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),(0,s.bF)(z,{ref:"cartMessage",onGetCart:e[0]||(e[0]=t=>K.getCart())},null,512),(0,s.Lk)("div",d,[l,(0,s.Lk)("div",i,[(0,s.Lk)("div",r,[(0,s.Lk)("button",{class:"btn btn-outline-danger fw-bold font-Noto mb-4",type:"button",onClick:e[1]||(e[1]=(...t)=>K.removeCartAll&&K.removeCartAll(...t)),disabled:"deleteAll"===j.isLoadingItem||0===j.cartData.carts.length},[(0,s.bo)((0,s.Lk)("span",u,null,512),[[a.aG,"deleteAll"===j.isLoadingItem]]),(0,s.eW)("清空購物車 ")],8,c)]),(0,s.Lk)("div",p,[(0,s.Lk)("table",b,[g,j.cartData.carts?((0,s.uX)(),(0,s.CE)("tbody",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.cartData.carts,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.product.id,class:"text-start"},[(0,s.Lk)("td",null,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>K.removeCartItem(t.id),disabled:j.isLoadingItem===t.id},[(0,s.bo)((0,s.Lk)("span",L,null,512),[[a.aG,j.isLoadingItem===t.id]]),(0,s.eW)(" x ")],8,m)]),(0,s.Lk)("td",k,[(0,s.Lk)("div",{class:"cartView-product",style:(0,n.Tr)({backgroundImage:`url(${t.product.imageUrl})`})},null,4)]),(0,s.Lk)("td",f,(0,n.v_)(t.product.title),1),(0,s.Lk)("td",null,[(0,s.Lk)("div",v,[(0,s.Lk)("div",w,[(0,s.bo)((0,s.Lk)("select",{id:"",class:"form-select","onUpdate:modelValue":e=>t.qty=e,onChange:e=>K.updateCartItem(t),disabled:j.isLoadingItem===t.id},[(0,s.bo)((0,s.Lk)("span",y,null,512),[[a.aG,j.isLoadingItem===t.id]]),((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(20,(e=>(0,s.Lk)("option",{value:e,key:`${e}-${t.id}`},(0,n.v_)(e),9,x))),64))],40,C),[[a.u1,t.qty]]),(0,s.Lk)("span",M,(0,n.v_)(t.product.unit),1)])])]),(0,s.Lk)("td",I,[(0,s.bo)((0,s.Lk)("span",N,null,512),[[a.aG,j.isLoadingItem===t.id]]),(0,s.Lk)("span",$,"單價 "+(0,n.v_)(t.product.price)+"元 /",1),(0,s.Lk)("span",_," 總價"+(0,n.v_)(t.total)+"元 ",1)])])))),128))])):(0,s.Q3)("",!0),(0,s.Lk)("tfoot",null,[(0,s.Lk)("tr",null,[A,D,E,(0,s.Lk)("td",X,[(0,s.eW)((0,n.v_)(j.cartData.total),1),F])])])]),(0,s.Lk)("div",q,[(0,s.Lk)("div",S,[(0,s.Lk)("div",V,[G,(0,s.bo)((0,s.Lk)("input",{type:"text",id:"CartView_coupon",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>j.coupon_code=t),placeholder:"請輸入挑戰碼"},null,512),[[a.Jo,j.coupon_code]]),(0,s.Lk)("div",H,[(0,s.Lk)("button",{class:"btn btn-outline-secondary font-Noto fw-bold rounded-0",type:"button",onClick:e[3]||(e[3]=(...t)=>K.addCouponCode&&K.addCouponCode(...t))}," 套用挑戰碼 ")])]),(0,s.Lk)("div",W,[(0,s.Lk)("button",{class:"btn btn-danger font-Noto fw-bold shadow",type:"button",style:{width:"30%"},onClick:e[4]||(e[4]=(...t)=>K.nextPage&&K.nextPage(...t)),disabled:"deleteAll"===j.isLoadingItem||0===j.cartData.carts.length}," 下一步 ",8,P)])])])])])])],64)}o(4114);var j=o(304),K=o(5930),T={data(){return{cartData:{carts:[]},products:[],productId:"",isLoading:!1,isLoadingItem:"",coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{CartMessage:j.A},methods:{getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart").then((t=>{this.cartData=t.data.data,K.A.emit("cart-num",this.cartData.carts.length),this.$emit("get-cart")}))},addToCart(t,e=1){const o={product_id:t,qty:e};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart",{data:o}).then((()=>{this.getCart(),this.isLoadingItem=""})).catch((t=>{this.$frontHttpMessageState(t.response,"購物車更新失敗")}))},removeCartItem(t){this.isLoadingItem=t,this.$refs.cartMessage.openModal(!1,t,!1),this.getCart(),this.isLoadingItem=""},removeCartAll(){this.isLoadingItem="deleteAll",this.isLoadingItem="",this.$refs.cartMessage.openModal(!1,"",!0),this.getCart()},updateCartItem(t){const e={product_id:t.product.id,qty:t.qty};this.isLoadingItem=t.id,this.$http.put(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart/${t.id}`,{data:e}).then((t=>{this.$frontHttpMessageState(t,"更改成功"),this.getCart(),this.isLoadingItem=""})).catch((t=>{this.isLoading=!1,this.$frontHttpMessageState(t.response,"更改失敗")}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$frontHttpMessageState(t,"加入挑戰碼"),this.getCart(),this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$frontHttpMessageState(t.response,"尚無該挑戰")}))},nextPage(){this.isLoading=!0,this.$router.push("/userContact"),this.isLoading=!1}},created(){this.isLoading=!0,this.getCart(),this.isLoading=!1}},z=o(6262);const J=(0,z.A)(T,[["render",U]]);var Q=J}}]);
//# sourceMappingURL=293.0e9ee6f5.js.map
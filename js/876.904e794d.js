"use strict";(self["webpackChunkgrandmasam_diner_renewed"]=self["webpackChunkgrandmasam_diner_renewed"]||[]).push([[876],{4402:function(t,a,e){e.d(a,{A:function(){return m}});var s=e(641),o=e(33),l=e(3751);const i={"aria-label":"Page navigation"},r={class:"pagination justify-content-center"},n=["aria-disabled"],d={key:0,class:"page-link link-dark fw-bold"},c=["onClick"],u=["aria-disabled"];function p(t,a,e,p,h,b){return(0,s.uX)(),(0,s.CE)("nav",i,[(0,s.Lk)("ul",r,[(0,s.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:!e.hasPre}])},[(0,s.Lk)("a",{class:"page-link link-dark fw-bold",href:"#",tabindex:"-1","aria-disabled":!e.hasPre,onClick:a[0]||(a[0]=(0,l.D$)((t=>b.emitData(e.currentPage-1)),["prevent"]))},"上一頁",8,n)],2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.totalPages,((t,a)=>((0,s.uX)(),(0,s.CE)("li",{class:(0,o.C4)(["page-item",{active:t===e.currentPage}]),key:a},[t===e.currentPage?((0,s.uX)(),(0,s.CE)("span",d,(0,o.v_)(t),1)):((0,s.uX)(),(0,s.CE)("a",{key:1,class:"page-link link-dark fw-bold",href:"#",onClick:(0,l.D$)((a=>b.emitData(t)),["prevent"])},(0,o.v_)(t),9,c))],2)))),128)),(0,s.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:!e.hasNext}])},[(0,s.Lk)("a",{class:"page-link fw-bold",href:"#","aria-disabled":!e.hasNext,onClick:a[1]||(a[1]=(0,l.D$)((t=>b.emitData(e.currentPage+1)),["prevent"]))},"下一頁",8,u)],2)])])}var h={data(){return{}},props:["currentPage","hasPre","hasNext","totalPages"],methods:{emitData(t){this.$emit("click-page",t)}}},b=e(6262);const g=(0,b.A)(h,[["render",p]]);var m=g},304:function(t,a,e){e.d(a,{A:function(){return x}});var s=e(641);const o={class:"modal fade",ref:"modalMessage",id:"cartMessage",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},l={class:"modal-dialog"},i={key:0,class:"modal-content"},r={class:"modal-header bg-warning"},n=(0,s.Lk)("h3",{class:"modal-title text-light font-Noto fw-550",id:"exampleModalLabel"},"執行成功",-1),d=(0,s.Fv)('<div class="modal-body"><div class="container pt-2 gx-2"><h5 class="fw-bold"><span class="text-success"><i class="bi bi-check-circle"></i></span> 商品加入購物車中 </h5></div></div>',1),c={class:"modal-footer"},u={class:"container gx-2 d-flex justify-content-center"},p={key:1,class:"modal-content"},h={class:"modal-header bg-danger"},b=(0,s.Lk)("h3",{class:"modal-title text-light font-Noto fw-550",id:"exampleModalLabel"},"刪除警示",-1),g=(0,s.Lk)("div",{class:"modal-body"},[(0,s.Lk)("div",{class:"container gx-2 pt-2"},[(0,s.Lk)("h5",{class:"font-Noto fw-550"},"即將被您刪除的商品會感到難過"),(0,s.Lk)("p",{class:"font-Noto fw-400"}," 其實我們的商品也是有情緒的，您這麼做會讓商品感受到您的冷漠，而他們要的，其實不多，只是希望您能接受他們而已 ")])],-1),m={class:"modal-footer gx-2"},k={class:"container d-flex justify-content-end"};function v(t,a,e,v,f,L){return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",l,[f.add?((0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("div",r,[n,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=(...t)=>L.closeModal&&L.closeModal(...t)),"data-bs-dismiss":"modal","aria-label":"Close"})]),d,(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.Lk)("button",{type:"button",class:"btn btn-warning mx-2 mb-1 p-2 border border-dark border-1 font-Noto fw-400",onClick:a[1]||(a[1]=(...t)=>L.closeModal&&L.closeModal(...t))}," 好優 ")])])])):((0,s.uX)(),(0,s.CE)("div",p,[(0,s.Lk)("div",h,[b,(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:a[2]||(a[2]=(...t)=>L.closeModal&&L.closeModal(...t)),"aria-label":"Close"})]),g,(0,s.Lk)("div",m,[(0,s.Lk)("div",k,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-dark p-2 mb-1 font-Noto fw-400","data-bs-dismiss":"modal",onClick:a[3]||(a[3]=(...t)=>L.closeModal&&L.closeModal(...t))}," 再想想 "),(0,s.Lk)("button",{type:"button",class:"btn btn-danger ms-2 p-2 mb-1 border border-dark border-1 font-Noto fw-400",onClick:a[4]||(a[4]=a=>(L.removeCart(f.all,f.id),t.$emit("get-cart"),L.closeModal()))}," 這與我無瓜 ")])])]))])],512)}var f=e(9635),L=e.n(f),w={data(){return{modal:null,add:!0,id:"",all:!1}},methods:{openModal(t,a,e){t?this.add=!0:(this.add=!1,this.id=a,this.all=!!e),this.modal.show()},closeModal(){this.modal.hide(),this.id="",this.all=!1},removeCart(t,a){t?this.$http.delete("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/carts").then((()=>{})):this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart/${a}`).then((()=>{}))}},mounted(){this.modal=new(L())(document.querySelector("#cartMessage"))}},C=e(6262);const y=(0,C.A)(w,[["render",v]]);var x=y},4876:function(t,a,e){e.r(a),e.d(a,{default:function(){return _t}});var s=e(641),o=e(3751),l=e(33);const i=(0,s.Fv)('<div class="container bg-warning"><div class="row row-cols-1 row-cols-lg-2 g-1 my-1"><div class="col col-lg-6"><div class="container px-2 py-4 p-sm-5 bg-warning rounded"><div class="row ps-2 row-cols-1"><div class="col m-auto"><h2 class="mt-5 mb-4 ms-2 fs-1 text-nowrap text-dark text-center text-sm-start font-Noto fw-800"> 產品/服務列表 </h2><p class="fs-3 text-dark text-sm-nowrap font-Noto fw-600">廚師介紹</p><p class="fs-5 text-sm-nowrap font-Noto fw-550 text-bg-productsView-yellow"><span class="d-none d-md-inline">五腥出品，</span>來自嘉義明雄的米其林廚師帶來的味道 </p><p class="fs-5 text-sm-nowrap font-Noto fw-550 text-bg-productsView-yellow"> 而每份<span class="d-none d-md-inline">他所帶來的</span>食物，都有屬於食材自己的故事 </p><p class="fs-5 text-sm-nowrap font-Noto fw-550 text-bg-productsView-yellow"> 只要您用心品嘗，一定能嚐出嘉明<span class="d-none d-md-inline font-Noto">( 嘉義民雄 )</span>的味道 </p></div></div></div></div><div class="d-none d-sm-grid col col-lg-6 productsView-banner mt-1"></div></div></div>',1),r={class:"container mb-5 mt-md-5 mt-3 mb-7"},n={class:"row"},d={class:"col-md-2"},c={class:"border border-bottom border-top-0 border-start-0 border-end-0 mb-3 mx-1"},u={class:"card border-0"},p={class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0"},h=(0,s.Lk)("div",{class:"d-flex justify-content-between align-items-center pe-1 my-2"},[(0,s.Lk)("h4",{class:"fw-bold"},[(0,s.eW)("類別 "),(0,s.Lk)("span",{class:"text-secondary small"}," ▽ ")])],-1),b={class:"card-body p-0"},g={class:"list-group"},m={class:"list-group-item p-0"},k=["onClick"],v={class:"text-secondary small mt-2"},f=(0,s.Lk)("span",{class:"fw-bold"}," 類別鈕 ",-1),L=(0,s.Lk)("span",{class:"fw-bold"}," 全類別 ",-1),w={class:"col-md-10"},C={class:"row row-cols-1 row-cols-lg-3"},y={class:"card border-0 mb-2 p-2 g-1 shadow overall position-relative"},x={class:"cart-img-top"},_={class:"card-body p-1"},M={class:"mb-0 mt-1 fw-bold"},$={class:"d-flex justify-content-between"},N={class:"card-text my-1 fw-bold"},E={class:"text-muted fw-light small my-auto"},P=["onClick","disabled"],X={class:"spinner-grow spinner-grow-sm"},F=["onClick","onKeyup"],I={key:0,class:"bi bi-heart-fill"},D={key:1,class:"bi bi-heart"},S={class:"d-flex justify-content-center mt-5"};function A(t,a,e,A,W,O){const T=(0,s.g2)("PageLoading"),j=(0,s.g2)("CartModal"),K=(0,s.g2)("CartMessage"),Q=(0,s.g2)("RouterLink"),V=(0,s.g2)("CartIcon"),H=(0,s.g2)("PaginationFooter");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(T,{loader:"bars",active:W.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),(0,s.bF)(j,{ref:"CartModal"},null,512),(0,s.bF)(K,{ref:"cartMessage"},null,512),i,(0,s.Lk)("div",r,[(0,s.Lk)("div",n,[(0,s.Lk)("div",d,[(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.Lk)("div",p,[h,(0,s.Lk)("div",b,[(0,s.Lk)("ul",g,[(0,s.bo)((0,s.Lk)("li",m,[(0,s.Lk)("button",{type:"button",class:"fw-bold btn btn-light h-100 w-100 p-2",onClick:a[0]||(a[0]=t=>O.arrestHim())}," 未亡人系列 ")],512),[[o.aG,!1===W.num]]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(W.categories,((t,a)=>((0,s.uX)(),(0,s.CE)("li",{class:"list-group-item p-0",key:a},[(0,s.Lk)("button",{type:"button",class:"fw-bold btn btn-light h-100 w-100 p-2",onClick:a=>(W.num=!W.num)?O.getCategory(t):O.catButton()},(0,l.v_)(t),9,k)])))),128))]),(0,s.bo)((0,s.Lk)("p",v,[(0,s.eW)(" 說明: 再點一下 "),f,(0,s.eW)(">回到 "),L],512),[[o.aG,W.num]])])])])])]),(0,s.Lk)("div",w,[(0,s.Lk)("div",C,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(W.products,(t=>((0,s.uX)(),(0,s.CE)("div",{class:"col p-2",key:t.id},[(0,s.Lk)("div",y,[(0,s.Lk)("div",x,[(0,s.bF)(Q,{to:{path:`/productView/${t.id}`},class:"text-decoration-none"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:"cart-image rounded-0 ratio ratio-16x9",style:(0,l.Tr)({backgroundImage:`url(${t.imageUrl})`})},null,4)])),_:2},1032,["to"])]),(0,s.Lk)("div",_,[(0,s.Lk)("h5",M,(0,l.v_)(t.title),1),(0,s.Lk)("div",$,[(0,s.Lk)("div",null,[(0,s.Lk)("p",N,"TWD "+(0,l.v_)(t.price),1),(0,s.Lk)("p",E,[(0,s.Lk)("del",null," 原價TWD"+(0,l.v_)(t.origin_price),1)])]),(0,s.Lk)("button",{type:"button",class:"btn btn-warning fw-bolder border border-1 btn-sm p-2 my-auto",onClick:a=>(O.addToCart(t.id),O.getCart()),disabled:W.isLoadingItem===t.id},[(0,s.bo)((0,s.Lk)("span",X,null,512),[[o.aG,W.isLoadingItem===t.id]]),(0,s.eW)(" 加入購物車 ")],8,P)])]),(0,s.Lk)("a",{href:"#",class:"position-absolute text-light",style:{right:"16px",top:"16px"},onClick:(0,o.D$)((a=>W.favorites.includes(t.id)?O.removeFromFavorites(t.id):O.saveToFavorites(t.id)),["prevent"]),onKeyup:(0,o.jR)((a=>W.favorites.includes(t.id)?O.removeFromFavorites(t.id):O.saveToFavorites(t.id)),["i"])},[W.favorites.includes(t.id)?((0,s.uX)(),(0,s.CE)("i",I)):((0,s.uX)(),(0,s.CE)("i",D))],40,F)])])))),128)),(0,s.Lk)("button",{type:"button",class:"btn",onClick:a[1]||(a[1]=t=>O.openCartModal(W.cartData))},[(0,s.bF)(V,{cartNum:W.cartNum},null,8,["cartNum"])])])]),(0,s.Lk)("div",S,[(0,s.bo)((0,s.bF)(H,{"current-page":W.current_page,"has-pre":W.has_pre,"has-next":W.has_next,"total-pages":W.total_pages,onClickPage:O.getProducts},null,8,["current-page","has-pre","has-next","total-pages","onClickPage"]),[[o.aG,!1===W.num]])])])])],64)}e(4114);var W=e(5930),O=e(4402),T=e(304);const j={type:"button",class:"cart-icon bg-warning shadow p-2 mb-1 fw-bold link-warning fs-4"},K={class:"bi bi-cart2 position-relative"},Q={class:"position-absolute top-10 start-100 translate-middle p-1 bg-danger border border-light border-1 rounded-circle text-light fw-bold",style:{"font-size":"0.5rem"}},V=(0,s.Lk)("span",{class:"visually-hidden"},"購物車內品項",-1);function H(t,a,e,o,i,r){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("button",j,[(0,s.Lk)("i",K,[(0,s.Lk)("span",Q,[(0,s.eW)((0,l.v_)(e.cartNum)+" ",1),V])])])])}var G={props:["cartNum"]},q=e(6262);const J=(0,q.A)(G,[["render",H]]);var R=J;const B={class:"modal fade",id:"CartModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},U={class:"modal-dialog",role:"document"},z={class:"modal-content"},Y={class:"modal-header bg-warning"},Z=(0,s.Lk)("h5",{class:"modal-title fw-bold",id:"exampleModalLabel"},"購物車",-1),tt={class:"modal-body"},at={key:0,class:"px-2 pt-3"},et={class:"table mb-0"},st=(0,s.Lk)("thead",null,[(0,s.Lk)("th",null,"刪除"),(0,s.Lk)("th",null,"品名"),(0,s.Lk)("th",null,"數量"),(0,s.Lk)("th",{class:"text-right"},"單價")],-1),ot=["onClick","disabled"],lt={class:"spinner-grow spinner-grow-sm"},it={key:0,class:"text-dark"},rt=(0,s.Lk)("small",null,"已套用優惠券",-1),nt=[rt],dt={class:"text-right"},ct={key:1,colspan:"4",class:"text-right fw-bold pt-3"},ut={key:0},pt={colspan:"4",class:"text-right text-dark h5 border-top-0 fw-bold"},ht={key:1,class:"container my-3 text-center"},bt=(0,s.Lk)("p",{class:"h3 text-secondary"},"目前無選購商品，歡迎立即選購",-1),gt=[bt],mt={key:0,class:"modal-footer"};function kt(t,a,e,i,r,n){const d=(0,s.g2)("RouterLink");return(0,s.uX)(),(0,s.CE)("div",B,[(0,s.Lk)("div",U,[(0,s.Lk)("div",z,[(0,s.Lk)("div",Y,[Z,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=(...t)=>n.closeModal&&n.closeModal(...t)),"data-bs-dismiss":"modal","aria-label":"Close"})]),(0,s.Lk)("div",tt,[r.cart.carts.length>0?((0,s.uX)(),(0,s.CE)("section",at,[(0,s.Lk)("table",et,[st,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.cart.carts,((t,a)=>((0,s.uX)(),(0,s.CE)("tr",{key:a},[(0,s.Lk)("td",null,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>(n.removeCart(t.id),this.modal.hide()),disabled:r.isLoadingItem===t.id},[(0,s.bo)((0,s.Lk)("span",lt,null,512),[[o.aG,r.isLoadingItem===t.id]]),(0,s.eW)(" x ")],8,ot)]),(0,s.Lk)("td",null,[(0,s.bF)(d,{to:{path:`/productView/${t.product.id}`},class:"text-decoration-none link-dark fw-bold"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(t.product.title),1)])),_:2},1032,["to"]),t.coupon?((0,s.uX)(),(0,s.CE)("div",it,nt)):(0,s.Q3)("",!0)]),(0,s.Lk)("td",null,(0,l.v_)(t.qty)+(0,l.v_)(t.product.unit),1),(0,s.Lk)("td",dt,"$"+(0,l.v_)(t.total),1)])))),128)),(0,s.Lk)("tr",null,[r.cart.total==r.cart.final_total?((0,s.uX)(),(0,s.CE)("td",{key:0,colspan:"4",class:(0,l.C4)(["text-right fw-bold pt-3",{"text-dark":r.cart.total==r.cart.final_total,h5:r.cart.total==r.cart.final_total}])}," 總計 $"+(0,l.v_)(r.cart.total),3)):(0,s.Q3)("",!0),r.cart.total!==r.cart.final_total?((0,s.uX)(),(0,s.CE)("td",ct,[(0,s.Lk)("del",null,"總計 $"+(0,l.v_)(r.cart.total),1)])):(0,s.Q3)("",!0)]),r.cart.total!==r.cart.final_total?((0,s.uX)(),(0,s.CE)("tr",ut,[(0,s.Lk)("td",pt," 折扣價   $"+(0,l.v_)(r.cart.final_total),1)])):(0,s.Q3)("",!0)])])])):(0,s.Q3)("",!0),0===r.cart.carts.length?((0,s.uX)(),(0,s.CE)("section",ht,gt)):(0,s.Q3)("",!0)]),r.cart.carts.length>0?((0,s.uX)(),(0,s.CE)("div",mt,[(0,s.Lk)("button",{type:"button",class:"btn btn-warning btn-block btn-shadow fw-bold",onClick:a[1]||(a[1]=t=>(n.closeModal(),n.goOrders()))}," 結帳去 ")])):(0,s.Q3)("",!0)])])])}var vt=e(9635),ft=e.n(vt),Lt={data(){return{modal:null,isLoadingItem:"",cart:{carts:[]}}},methods:{goOrders(){this.$router.push("/cartView")},openModal(t){this.cart=t,this.modal.show()},closeModal(){this.isLoadingItem="",this.modal.hide()},removeCart(t){this.isLoadingItem=t,this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart/${t}`).then((()=>{W.A.emit("get-cart"),this.isLoadingItem=""}))}},mounted(){this.modal=new(ft())(document.querySelector("#CartModal"))}};const wt=(0,q.A)(Lt,[["render",kt]]);var Ct=wt,yt={data(){return{products:[],allProducts:[],showProducts:this.products,productId:"",addNum:0,num:!1,isLoading:!1,isLoadingItem:"",categories:[],current_page:1,has_next:!0,has_pre:!1,total_pages:1,cartNum:0,cartData:{carts:[]},favorites:JSON.parse(window.localStorage.getItem("favorites"))||[]}},components:{PaginationFooter:O.A,CartMessage:T.A,CartIcon:R,CartModal:Ct},methods:{arrestHim(){this.$router.push("/arrestUser")},openCartModal(t){this.$refs.CartModal.openModal(t)},getCategory(t){const a=[];this.isLoading=!0;let e="https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/products/all";t&&(e=`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/products?category=${t}`),this.$http.get(e).then((e=>{this.allProducts=JSON.parse(JSON.stringify(e.data.products)),t&&(this.products=this.allProducts),this.allProducts.forEach((t=>{a.push(t.category)})),this.categories=a.filter(((t,e)=>a.indexOf(t)===e)),this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$frontHttpMessageState(t.response,"類別截取失敗")}))},getProducts(t=1){const a=`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/products?page=${t}`;this.isLoading=!0,this.$http.get(a).then((t=>{this.products=t.data.products,this.current_page=t.data.pagination.current_page,this.has_next=t.data.pagination.has_next,this.has_pre=t.data.pagination.has_pre,this.total_pages=t.data.pagination.total_pages,this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$frontHttpMessageState(t.response,"產品截取失敗")}))},getProduct(t){this.isLoading=!0,this.$router.push(`/user/product/${t}`),this.isLoading=!1},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart").then((t=>{this.cartData=t.data.data,this.cartNum=t.data.data.carts.length||0})).catch((t=>{this.$frontHttpMessageState(t.response,"購物車截取失敗")}))},saveToFavorites(t){this.favorites.push(t)},removeFromFavorites(t){const a=this.favorites.indexOf(t);-1!==a&&this.favorites.splice(a,1)},catButton(){this.getCategory(),this.getProducts()},addToCart(t,a=1){const e={product_id:t,qty:a};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart",{data:e}).then((()=>{this.isLoadingItem="",this.$refs.cartMessage.openModal(!0)})).catch((t=>{this.isLoadingItem="",this.$frontHttpMessageState(t.response,"購物車增加失敗")}))}},watch:{favorites:{handler(){window.localStorage.setItem("favorites",JSON.stringify(this.favorites))},deep:!0}},created(){W.A.on("get-cart",(()=>{this.getCart(),this.openCartModal(this.cartData)}))},mounted(){this.isLoading=!0,this.getCart(),this.getProducts(),this.getCategory(),this.isLoading=!1}};const xt=(0,q.A)(yt,[["render",A]]);var _t=xt}}]);
//# sourceMappingURL=876.904e794d.js.map
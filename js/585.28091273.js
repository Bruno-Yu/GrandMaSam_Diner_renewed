"use strict";(self["webpackChunkgrandmasam_diner_renewed"]=self["webpackChunkgrandmasam_diner_renewed"]||[]).push([[585],{7585:function(t,o,e){e.r(o),e.d(o,{default:function(){return A}});var s=e(641),d=e(33);const r={class:"container mt-4"},a=(0,s.Fv)('<div class="container my-3 d-none d-md-grid"><div class="row row-cols-3"><div class="col"><button class="btn w-100 btn-warning rounded-2 border border-dark border-3" type="button" disabled><p class="fs-4 font-Noto fw-600 text-dark my-2">購物車</p></button></div><div class="col"><button class="btn w-100 btn-warning rounded-2 border border-dark border-3" type="button" disabled><p class="fs-4 font-Noto fw-600 my-2">填寫資訊</p></button></div><div class="col"><button class="btn w-100 btn-warning rounded-2 border border-dark border-3" type="button"><p class="fs-4 font-Noto fw-600 my-2">訂單內容</p></button></div></div></div><h2 class="font-Noto mt-2 mt-lg-5 fw-700 text-center text-md-start ps-md-5 text-warning"> 步驟 3. 訂單內容 </h2>',2),n={class:"container shadow-sm my-5 bg-body border border-1 border-body align-middle rounded-3 px-lg-5"},l={class:"row row-cols-1 row-cols-lg-2 mt-5 mb-3 justify-content-center"},i={class:"col-lg-6 p-4 bg-body border border-1 border-body"},c=(0,s.Lk)("h3",{class:"fw-bold font-Noto mb-3"},"施主資訊",-1),u={class:"table"},b={key:0},h=(0,s.Lk)("th",{class:"font-Noto fw-400"},"姓名",-1),f={class:"font-Noto fw-400"},k=(0,s.Lk)("th",{class:"font-Noto fw-400"},"Email",-1),w=(0,s.Lk)("th",{class:"font-Noto fw-400"},"電話",-1),L=(0,s.Lk)("th",{class:"font-Noto fw-400"},"地址",-1),g={class:"font-Noto fw-400"},p={class:"col-lg-6 p-4 bg-body border border-1 border-body"},v=(0,s.Lk)("h3",{class:"fw-bold font-Noto mb-3"},"訂單細節",-1),m={class:"table"},y=(0,s.Lk)("th",{class:"font-Noto fw-400"},"訂單編號",-1),N=(0,s.Lk)("th",{class:"font-Noto fw-400"},"下單時間",-1),_=(0,s.Lk)("th",{class:"font-Noto fw-400"},"付款時間",-1),S=(0,s.Lk)("th",{class:"font-Noto fw-400"},"付款狀態",-1),x={key:0,class:"text-success font-Noto fw-600"},$={key:1,class:"text-muted font-Noto fw-600"},P=(0,s.Lk)("th",{class:"font-Noto fw-400"},"總金額",-1),C={class:"fs-4 font-Noto fw-bold text-warning"},D=(0,s.Lk)("hr",null,null,-1),F={class:"row my-2 justify-content-center p-4 bg-body border border-1 border-body"},M=(0,s.Lk)("h3",{class:"fw-bold font-Noto"},"選購商品",-1),E={class:"table col-6 mt-3 fw-bold font-Noto"},X=(0,s.Lk)("thead",null,[(0,s.Lk)("tr")],-1),j={class:"d-none d-lg-inline"},K={class:"text-end"},O={class:"my-3 d-flex justify-content-center"};function R(t,o,e,R,T,Y){const q=(0,s.g2)("PageLoading"),A=(0,s.g2)("ModalMessage");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(q,{loader:"bars",active:T.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),(0,s.bF)(A,{ref:"modalMessage"},null,512),(0,s.Lk)("div",r,[a,(0,s.Lk)("div",n,[(0,s.Lk)("div",l,[(0,s.Lk)("div",i,[c,(0,s.Lk)("table",u,[T.orderShow.user?((0,s.uX)(),(0,s.CE)("tbody",b,[(0,s.Lk)("tr",null,[h,(0,s.Lk)("td",f,(0,d.v_)(T.orderShow.user.name),1)]),(0,s.Lk)("tr",null,[k,(0,s.Lk)("td",null,(0,d.v_)(T.orderShow.user.email),1)]),(0,s.Lk)("tr",null,[w,(0,s.Lk)("td",null,(0,d.v_)(T.orderShow.user.tel),1)]),(0,s.Lk)("tr",null,[L,(0,s.Lk)("td",g,(0,d.v_)(T.orderShow.user.address),1)])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",p,[v,(0,s.Lk)("table",m,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[y,(0,s.Lk)("td",null,(0,d.v_)(T.orderShow.id),1)]),(0,s.Lk)("tr",null,[N,(0,s.Lk)("td",null,(0,d.v_)(T.orderShow.create_at),1)]),(0,s.Lk)("tr",null,[_,(0,s.Lk)("td",null,(0,d.v_)(T.PaidDate),1)]),(0,s.Lk)("tr",null,[S,(0,s.Lk)("td",null,[T.orderShow.is_paid?((0,s.uX)(),(0,s.CE)("strong",x,"已付款")):((0,s.uX)(),(0,s.CE)("span",$,"尚未付款"))])]),(0,s.Lk)("tr",null,[P,(0,s.Lk)("td",C,(0,d.v_)(T.orderShow.total),1)])])])])]),D,(0,s.Lk)("div",F,[M,(0,s.Lk)("table",E,[X,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(T.orderShow.products,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.id},[(0,s.Lk)("th",null,(0,d.v_)(t.product.title),1),(0,s.Lk)("td",null,[(0,s.eW)((0,d.v_)(t.qty)+" ",1),(0,s.Lk)("span",j,"/ "+(0,d.v_)(t.product.unit),1)]),(0,s.Lk)("td",K,(0,d.v_)(t.final_total),1)])))),128))])])]),(0,s.Lk)("div",O,[(0,s.Lk)("button",{type:"button",class:"btn btn-danger fw-bold font-Noto fs-4 w-auto",onClick:o[0]||(o[0]=(...t)=>Y.updatePaid&&Y.updatePaid(...t))}," 確認並付款 ")])])])],64)}var T={data(){return{status:{},orders:{},orderShow:{},isPaid:!1,isLoading:!1,PaidDate:"尚未付款"}},methods:{PaidDateRenewed(){const t=new Date,o=t.getFullYear(),e=t.getMonth()+1,s=t.getDate(),d=`${o}/${e}/${s}`;return d},dateTimeFormat(t){const o=new Date(1e3*t),e=o.getFullYear(),s=o.getMonth()+1,d=o.getDate(),r=`${e}/${s}/${d}`;return r},getOrder(){const t="https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/orders";this.$http.get(t).then((t=>{this.orders=t.data.orders.map((t=>({...t,create_at:this.dateTimeFormat(t.create_at)}))),this.orderShow=this.orders.pop()})).catch((()=>{this.isLoading=!1}))},updatePaid(){this.isLoading=!0;const{id:t}=this.orderShow,o=`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/pay/${t}`;this.$http.post(o).then((()=>{this.PaidDate=this.PaidDateRenewed(),this.$refs.modalMessage.openModal(!0,"paid",t),this.isLoading=!1})).catch((()=>{this.$refs.modalMessage.openModal(!1,"paid"),this.isLoading=!1}))}},created(){this.isLoading=!0,this.getOrder(),this.isLoading=!1}},Y=e(6262);const q=(0,Y.A)(T,[["render",R]]);var A=q}}]);
//# sourceMappingURL=585.28091273.js.map
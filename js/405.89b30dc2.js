"use strict";(self["webpackChunkgrandmasam_diner_renewed"]=self["webpackChunkgrandmasam_diner_renewed"]||[]).push([[405],{7405:function(t,s,o){o.r(s),o.d(s,{default:function(){return K}});var e=o(641),n=o(3751),a=o(33);const i={key:0,class:"container mt-3"},d=(0,e.Lk)("div",{class:"row bg-warning border-bottom border-3 border-dark"},[(0,e.Lk)("div",{class:"local-baby"})],-1),l=(0,e.Lk)("div",{class:"row mt-5 mb-3"},[(0,e.Lk)("h1",{class:"text-center font-Noto fs-1 fw-bold"},"收藏")],-1),r={class:"row d-flex justify-content-end"},c={class:"col-auto me-md-5"},b=["disabled"],g={class:"spinner-grow spinner-grow-sm"},u={class:"container shadow my-4 bg-body border border-1 border-body p-5 rounded"},f={class:"row"},p={class:"table"},h=(0,e.Lk)("thead",null,[(0,e.Lk)("tr",{class:"text-start text-start font-Noto fw-bold fs-5 text-primary"},[(0,e.Lk)("th",null,[(0,e.eW)("刪"),(0,e.Lk)("span",{class:"d-none d-lg-inline"},"除鍵")]),(0,e.Lk)("th",{class:"d-none d-lg-table-cell"},"預覽圖"),(0,e.Lk)("th",null,"品名"),(0,e.Lk)("th",null,"單價"),(0,e.Lk)("th",{class:"d-none d-lg-table-cell"},"產品細節"),(0,e.Lk)("th",{class:"text-nowrap"},[(0,e.eW)(" 加"),(0,e.Lk)("span",{class:"d-none d-lg-inline"},"入"),(0,e.eW)("購"),(0,e.Lk)("span",{class:"d-none d-lg-inline"},"物車")])])],-1),k=["onClick","disabled"],L={class:"spinner-grow spinner-grow-sm"},m={class:"d-none d-lg-table-cell"},v={class:"font-Noto fs-5 fw-400"},w={class:"spinner-grow spinner-grow-sm"},y={class:"text-secondary fz-sm"},I=(0,e.Lk)("span",{class:"d-none d-lg-inline font-Noto fs-5 fw-400"},"元",-1),x={class:"d-none d-lg-inline font-Noto fs-5 fw-400"},C={class:"d-none d-lg-table-cell"},N=["disabled","onClick"],A={class:"spinner-grow spinner-grow-sm font-Noto fs-5 fw-400"},F=["onClick","disabled"],T={class:"spinner-grow spinner-grow-sm"},S=(0,e.Lk)("i",{class:"d-lg-none bi bi-cart2 text-danger"},null,-1),P=(0,e.Lk)("span",{class:"d-none d-lg-inline-block btn btn-danger font-Noto fs-6 fw-400 btn-sm"}," 加到購物車",-1),$={class:"text-end my-3"},W=["disabled"],_={class:"spinner-grow spinner-grow-sm"},E={key:1,class:"container gx-0 fav-banner vh-100 my-1"},G={class:"row d-flex align-items-center justify-content-center vh-100"},D={class:"col vh-30 my-3"},X={class:"container bg-light font-Noto dialog-local-bg py-2"},V=(0,e.Fv)('<p class="text-dark fs-2 fw-bold text-center mt-4 mt-sm-2 font-Noto fw-500"> 怎麼? 你以為這是一般的購物網站嗎? </p><p class="text-dark fs-4 fw-bold text-center pt-2 font-Noto fw-400"> 你有想過 <span class="d-inline-block d-sm-inline">非洲的小孩</span>每過60秒就<span class="text-danger d-inline-block d-sm-inline">少了1分鐘的壽命</span>嗎? </p><p class="text-dark fs-4 fw-bold text-center font-Noto fw-400">而這</p><p class="text-dark fs-4 fw-bold text-center font-Noto fw-400"> 並不是收不收藏商品的問題，而是愛不愛國的問題!!! </p>',4),j={class:"d-flex justify-content-center mt-2 mb-2 mt-lg-4"};function H(t,s,o,H,M,O){const J=(0,e.g2)("PageLoading");return(0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.bF)(J,{loader:"bars",active:M.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),M.favorites.length?((0,e.uX)(),(0,e.CE)("div",i,[d,l,(0,e.Lk)("div",r,[(0,e.Lk)("div",c,[(0,e.Lk)("button",{class:"btn btn-outline-danger fw-bold font-Noto mb-1",type:"button",onClick:s[0]||(s[0]=(...t)=>O.removeFavAll&&O.removeFavAll(...t)),disabled:"deleteAll"===M.isLoadingItem||0===M.favorites.length},[(0,e.bo)((0,e.Lk)("span",g,null,512),[[n.aG,"deleteAll"===M.isLoadingItem]]),(0,e.eW)("清空收藏 ")],8,b)])]),(0,e.Lk)("div",u,[(0,e.Lk)("div",f,[(0,e.Lk)("table",p,[h,(0,e.Lk)("tbody",null,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(M.favProducts,(t=>((0,e.uX)(),(0,e.CE)("tr",{key:t.id,class:"text-start"},[(0,e.Lk)("td",null,[(0,e.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:s=>O.removeFromFavorites(t.id),disabled:M.isLoadingItem===t.id},[(0,e.bo)((0,e.Lk)("span",L,null,512),[[n.aG,M.isLoadingItem===t.id]]),(0,e.eW)(" x ")],8,k)]),(0,e.Lk)("td",m,[(0,e.Lk)("div",{class:"localStorage-product",style:(0,a.Tr)({backgroundImage:`url(${t.imageUrl})`})},null,4)]),(0,e.Lk)("td",v,(0,a.v_)(t.title),1),(0,e.Lk)("td",null,[(0,e.bo)((0,e.Lk)("span",w,null,512),[[n.aG,M.isLoadingItem===t.id]]),(0,e.Lk)("span",y,[(0,e.eW)((0,a.v_)(t.price)+" ",1),I,(0,e.Lk)("span",x," / "+(0,a.v_)(t.unit),1)])]),(0,e.Lk)("td",C,[(0,e.Lk)("button",{type:"button",class:"btn btn-outline-secondary btn-sm mt-2 font-Noto fw-400",disabled:M.isLoadingItem===t.id,onClick:s=>O.goToProductView(t.id)},[(0,e.bo)((0,e.Lk)("span",A,null,512),[[n.aG,M.isLoadingItem===t.id]]),(0,e.eW)(" 查看更多 ")],8,N)]),(0,e.Lk)("td",null,[(0,e.Lk)("button",{type:"button",class:"btn",onClick:s=>[O.addToCart(t.id),O.removeFromFavorites(t.id)],disabled:M.isLoadingItem===t.id},[(0,e.bo)((0,e.Lk)("span",T,null,512),[[n.aG,M.isLoadingItem===t.id]]),S,P],8,F)])])))),128))])]),(0,e.Lk)("div",$,[(0,e.Lk)("button",{class:"btn btn-danger font-Noto fw-bold border border-1 border-body",type:"button",onClick:s[1]||(s[1]=(...t)=>O.addAllToCart&&O.addAllToCart(...t)),disabled:"addAll"===M.isLoadingItem||0===M.favorites.length},[(0,e.bo)((0,e.Lk)("span",_,null,512),[[n.aG,"addAll"===M.isLoadingItem]]),(0,e.eW)(" 全加到購物車 ")],8,W)])])])])):((0,e.uX)(),(0,e.CE)("div",E,[(0,e.Lk)("div",G,[(0,e.Lk)("div",D,[(0,e.Lk)("div",X,[V,(0,e.Lk)("div",j,[(0,e.Lk)("button",{type:"button",class:"btn btn-outline-dark fs-3 p-2 mb-1 border border-dark border-2 w-30 font-Noto fw-600",onClick:s[2]||(s[2]=(...t)=>O.goToAIDS&&O.goToAIDS(...t))}," 我愛滋 "),(0,e.Lk)("button",{type:"button",class:"btn btn-danger fs-3 link-light mx-2 p-2 mb-1 border border-dark border-1 w-30 font-Noto fw-600",onClick:s[3]||(s[3]=(...t)=>O.backToStore&&O.backToStore(...t))}," 我愛國 ")])])])])]))],64)}o(4114);var M={data(){return{favorites:JSON.parse(window.localStorage.getItem("favorites"))||[],cartData:{carts:[]},products:[],favProducts:[],productId:"",isLoading:!1,isLoadingItem:""}},methods:{backToStore(){this.$router.push("/productsView")},goToAIDS(){this.$router.push("/aidsIntro")},getFavor(t){this.favorites.forEach((s=>{this.favProducts.push(t.filter((t=>t.id===s)))})),this.favProducts=this.favProducts.flat(1)},getProducts(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/products").then((t=>{this.products=t.data.products,this.getFavor(this.products),this.isLoading=!1})).catch((t=>{this.$frontHttpMessageState(t.response,"產品截取失敗")}))},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart").then((t=>{this.cartData=t.data.data})).catch((t=>{this.$frontHttpMessageState(t.response,"購物車截取失敗")}))},saveToFavorites(t){this.favorites.push(t)},removeFromFavorites(t){this.isLoadingItem="id";const s=this.favorites.indexOf(t);-1!==s&&(this.favorites.splice(s,1),this.isLoadingItem="")},addToCart(t,s=1){const o={product_id:t,qty:s};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart",{data:o}).then((()=>{this.getCart(),this.isLoadingItem=""})).catch((t=>{this.$frontHttpMessageState(t.response,"購物車增加失敗")}))},addAllToCart(){this.isLoadingItem="addAll",this.favorites.forEach((t=>{this.addToCart(t)})),this.removeFavAll(),this.isLoadingItem=""},removeFavAll(){this.isLoadingItem="deleteAll",this.favorites=[],this.favProducts=[],this.isLoadingItem=""},goToProductView(t){this.isLoading=!0,this.$router.push(`/productView/${t}`),this.isLoading=!1}},watch:{favorites:{handler(){window.localStorage.setItem("favorites",JSON.stringify(this.favorites)),this.getProducts()},deep:!0}},created(){this.isLoading=!0,this.getProducts(),this.isLoading=!1}},O=o(6262);const J=(0,O.A)(M,[["render",H]]);var K=J}}]);
//# sourceMappingURL=405.89b30dc2.js.map
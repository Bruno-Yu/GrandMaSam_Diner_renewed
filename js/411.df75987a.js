"use strict";(self["webpackChunkgrandmasam_diner_renewed"]=self["webpackChunkgrandmasam_diner_renewed"]||[]).push([[411],{1411:function(e,t,s){s.r(t),s.d(t,{default:function(){return W}});var a=s(641),o=s(33),r=s(3751);const l={class:"container px-lg-5"},n={class:"container my-3 d-none d-md-grid"},d={class:"row row-cols-3"},i={class:"col"},c=(0,a.Lk)("p",{class:"fs-4 font-Noto fw-600 text-dark my-2"},"購物車",-1),m=[c],u=(0,a.Fv)('<div class="col"><button class="btn w-100 btn-warning rounded-2 border border-dark border-3" type="button"><p class="fs-4 font-Noto fw-600 my-2">填寫資訊</p></button></div><div class="col"><button class="btn w-100 btn-outline-secondary rounded-2 border border-body border-3" type="button" disabled><p class="fs-4 font-Noto fw-600 my-2">訂單內容</p></button></div>',2),b=(0,a.Lk)("div",{class:"row mt-5 mb-3"},[(0,a.Lk)("h2",{class:"font-Noto fw-700 text-center text-md-start ps-md-5 text-warning"}," 步驟 2. 填寫資訊 ")],-1),f={class:"row justify-content-center shadow my-5 bg-light border border-1 border-body rounded-3"},p={class:"mb-3"},h=(0,a.Lk)("label",{for:"email",class:"form-label font-Noto fw-400"},[(0,a.eW)(" Email "),(0,a.Lk)("span",{class:"text-danger fw-bolder"},"*")],-1),g={class:"mb-3"},k=(0,a.Lk)("label",{for:"name",class:"form-label font-Noto fw-400"},[(0,a.eW)("收件人姓名 "),(0,a.Lk)("span",{class:"text-danger fw-bolder"},"*")],-1),L={class:"mb-3"},w=(0,a.Lk)("label",{for:"tel",class:"form-label font-Noto fw-400"},[(0,a.eW)("收件人電話 "),(0,a.Lk)("span",{class:"text-danger fw-bolder"},"*")],-1),v={class:"mb-3"},y=(0,a.Lk)("label",{for:"address",class:"form-label font-Noto fw-400"},[(0,a.eW)("收件人地址 "),(0,a.Lk)("span",{class:"text-danger fw-bolder"},"*")],-1),x={class:"mb-3"},V=(0,a.Lk)("label",{for:"message",class:"form-label font-Noto fw-400"},"留言",-1),F=(0,a.Lk)("p",{class:"text-secondary fw-bolder small"},[(0,a.eW)(" 說明: "),(0,a.Lk)("span",{class:"text-danger fw-bolder"}," * "),(0,a.eW)("代表必填項目 ")],-1),C={class:"d-flex justify-content-between"},N=["disabled"];function $(e,t,s,c,$,P){const E=(0,a.g2)("PageLoading"),S=(0,a.g2)("VField"),W=(0,a.g2)("ErrorMessage"),_=(0,a.g2)("VForm");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(E,{loader:"bars",active:$.isLoading,"can-cancel":!0,"is-full-page":!1},null,8,["active"]),(0,a.Lk)("div",l,[(0,a.Lk)("div",n,[(0,a.Lk)("div",d,[(0,a.Lk)("div",i,[(0,a.Lk)("button",{class:"btn w-100 btn-warning rounded-2 border border-dark border-3",type:"button",onClick:t[0]||(t[0]=(...e)=>P.prePage&&P.prePage(...e))},m)]),u])]),b,(0,a.Lk)("div",f,[(0,a.bF)(_,{ref:"form",class:"col-md-6 rounded-3 p-5",onSubmit:P.onSubmit},{default:(0,a.k6)((({errors:e})=>[(0,a.Lk)("div",p,[h,(0,a.bF)(S,{id:"email",name:"email",type:"email",class:(0,o.C4)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:$.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=e=>$.form.user.email=e)},null,8,["class","modelValue"]),(0,a.bF)(W,{name:"email",class:"invalid-feedback"})]),(0,a.Lk)("div",g,[k,(0,a.bF)(S,{id:"name",name:"姓名",type:"text",class:(0,o.C4)(["form-control font-Noto fw-400",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:P.noEmpty,modelValue:$.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=e=>$.form.user.name=e)},null,8,["class","rules","modelValue"]),(0,a.bF)(W,{name:"姓名",class:"invalid-feedback"})]),(0,a.Lk)("div",L,[w,(0,a.bF)(S,{id:"tel",name:"電話",type:"tel",class:(0,o.C4)(["form-control font-Noto fw-400",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:P.isPhone,modelValue:$.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=e=>$.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,a.bF)(W,{name:"電話",class:"invalid-feedback"})]),(0,a.Lk)("div",v,[y,(0,a.bF)(S,{id:"address",name:"地址",type:"text",class:(0,o.C4)(["form-control font-Noto fw-400",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:P.noEmpty,modelValue:$.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=e=>$.form.user.address=e)},null,8,["class","rules","modelValue"]),(0,a.bF)(W,{name:"地址",class:"invalid-feedback"})]),(0,a.Lk)("div",x,[V,(0,a.bo)((0,a.Lk)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10",rules:{required:!1},"onUpdate:modelValue":t[5]||(t[5]=e=>$.form.message=e)},null,512),[[r.Jo,$.form.message]])]),F,(0,a.Lk)("div",C,[(0,a.Lk)("button",{class:"d-block btn btn-outline-danger font-Noto fw-bold",type:"button",onClick:t[6]||(t[6]=(...e)=>P.prePage&&P.prePage(...e))}," 上一步 "),(0,a.Lk)("button",{type:"submit",class:"d-block btn btn-danger font-Noto fw-bold shadow",disabled:Object.keys(e).length>0||0===$.cartData.carts.length}," 送出訂單 ",8,N)])])),_:1},8,["onSubmit"])])])],64)}s(4114);var P={data(){return{cartData:{carts:[]},isLoadingItem:"",isLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{addToCart(e,t=1){const s={product_id:e,qty:t};this.isLoadingItem=e,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart",{data:s}).then((()=>{this.getCart(),this.isLoadingItem=""}))},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/cart").then((e=>{this.cartData=e.data.data})).catch((e=>{this.isLoading=!1,this.$frontHttpMessageState(e.response,"購物車截取失敗")}))},onSubmit(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/order",t=this.form;this.$http.post(e,{data:t}).then((()=>{this.$refs.form.resetForm(),this.$router.push("/orderCheck"),this.isLoading=!1})).catch((e=>{this.isLoading=!1,this.$frontHttpMessageState(e.response,"表單傳送失敗")}))},noEmpty(e){return!!e||"此欄不得為空"},isPhone(e){const t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},prePage(){this.isLoading=!0,this.$router.push("/cartView"),this.isLoading=!1}},mounted(){this.isLoading=!0,this.getCart(),this.isLoading=!1}},E=s(6262);const S=(0,E.A)(P,[["render",$]]);var W=S}}]);
//# sourceMappingURL=411.df75987a.js.map